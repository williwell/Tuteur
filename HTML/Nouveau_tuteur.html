<!DOCTYPE html>
<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="../CSS/Style.css"/>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <meta charset="utf-8" />
        <meta name="author" content="Alexandra Sirois, William-Arthur Cinq-Mars, Mathieu Harvey">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Accueil Admin</title>
    </head>

<body>
    <div id="MenuBar"></div>
    <div id="BeginDiv" class="row" style="margin-left: 2%;">
        <div class="col-md-3"></div>
        <div class="col-md-9"><h1>Nouveau tuteur</h1></div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-4"></div>
        <div class="col-md-8"><p>
            <form method="post" enctype="text/plain">
            <div class="col-md-3">
            <label for="Matricule">Matricule</label><br>
            <input type="text" class="form-control" id=Matricule name=Matricule onchange=changeM()></div>
            <div class="col-md-3"><br>
            <label for="Nom">Nom</label><br>
            <input type="text" class="form-control" id=Nom name=Nom onchange=changeN()></div>
            <div class="col-md-3"><br>
            <label for="Courriel">Courriel</label><br>
            <input type="email" class="form-control" id=Courriel name=Courriel onchange=changeC()></div><br>
            <div class="col-md-3"><br>
            <label for="Programme">Programme</label><br>
            <input type="text" class="form-control" id=Programme name=Programme onchange=changeP()></div><br>
            <div class="col-md-3"><br>
            <label for="Telephone">Telephone</label><br>
            <input type="text" class="form-control" id=Telephone name=Telephone onchange=changeT()></div><br>
            <div class="col-md-3"><br>
            <label for="Enseignant">Matricule de l'enseignant ressource</label><br>
            <input type="text" class="form-control" id="Enseignant" name="Enseignant" onchange=changeE()></div><br>
            </p>
        </form><button id="btnAjoutNouveau"style="width:20%"disabled=true>Ajouter le nouveau tuteur</button><br></div>
    </div>
    
</body>

<script>
$(document).ready(function(){
    // Get value on button click and show alert
    $("#btnAjoutNouveau").click(function(){
        var matricule= $("#Matricule").val();
        var nom = $("#Nom").val();
        var courriel = $("#Courriel").val();
        var programme= $("#Programme").val();
        var telephone= $("#Telephone").val();
        var enseignant=$("#Enseignant").val();
        $.ajax({
            url: "../PHP/NewTutor.php",
            type: "POST",
            data:{
                "matricule": matricule,
                "nom": nom,
                "courriel": courriel,
                "programme":programme,
                "telephone": telephone,
                "enseignant": enseignant
            },
            /*dataType: "json",*/
            success: function(reponse){
                alert("Création du tuteur effectuée");
                //window.open("Compte.html?email="+$("#iemail").val(), "_self");
            },
            error: function(message, e){
                alert("erreur" + message +"    "+e);
                console.log("erreur lors de l'ajout:" + er);
            }
        });
    });
});
function changeM(){
    var regMat = new RegExp(/[0-9]{7}$/)
    var regNom = new RegExp(/^[a-zA-Z\s]+$/);
    var regMail = new RegExp(/^\S+@\S+$/);
    var regTel = new RegExp(/[(]{0,1}\d\d\d[)]{0,1}[-]{0,1}[\s]{0,1}\d\d\d[-]{0,1}[\s]{0,1}\d\d\d\d$/);
    var regProg = new RegExp(/(\d\d\d\.\w\w)$/);
    document.getElementById("btnAjoutNouveau").disabled=true
    if(regMat.test(document.getElementById("Matricule").value)){
        document.getElementById("Matricule").style.background = "#FFFFFF";
        if(regNom.test(document.getElementById("Nom").value)){
            if(regMail.test(document.getElementById("Courriel").value)){
                if(regProg.test(document.getElementById("Programme").value)){
                    if(regTel.test(document.getElementById("Telephone").value)){
                        if(regMat.test(document.getElementById("Enseignant").value)){
                            document.getElementById("btnAjoutNouveau").disabled=false
                        }
                    }
                }
            }
    }
    }else{document.getElementById("Matricule").style.background = "#FF7575";}
    
}

function changeN(){
    var regMat = new RegExp(/[0-9]{7}$/)
    var regNom = new RegExp(/^[a-zA-Z\s]+$/);
    var regMail = new RegExp(/^\S+@\S+$/);
    var regTel = new RegExp(/[(]{0,1}\d\d\d[)]{0,1}[-]{0,1}[\s]{0,1}\d\d\d[-]{0,1}[\s]{0,1}\d\d\d\d$/);
    var regProg = new RegExp(/(\d\d\d\.\w\w)$/);
    document.getElementById("btnAjoutNouveau").disabled=true
    if(regNom.test(document.getElementById("Nom").value)){ 
        document.getElementById("Nom").style.background = "#FFFFFF";
        if(regMat.test(document.getElementById("Matricule").value)){    
            if(regMail.test(document.getElementById("Courriel").value)){
                if(regProg.test(document.getElementById("Programme").value)){
                    if(regTel.test(document.getElementById("Telephone").value)){
                        if(regMat.test(document.getElementById("Enseignant").value)){
                            document.getElementById("btnAjoutNouveau").disabled=false
                        }
                    }
                }
            }
    }
    }else{document.getElementById("Nom").style.background = "#FF7575";}
    
}

function changeC(){
    var regMat = new RegExp(/[0-9]{7}$/)
    var regNom = new RegExp(/^[a-zA-Z\s]+$/);
    var regMail = new RegExp(/^\S+@\S+$/);
    var regTel = new RegExp(/[(]{0,1}\d\d\d[)]{0,1}[-]{0,1}[\s]{0,1}\d\d\d[-]{0,1}[\s]{0,1}\d\d\d\d$/);
    var regProg = new RegExp(/(\d\d\d\.\w\w)$/);
    document.getElementById("btnAjoutNouveau").disabled=true
    if(regMail.test(document.getElementById("Courriel").value)){
        document.getElementById("Courriel").style.background = "#FFFFFF";
        if(regNom.test(document.getElementById("Nom").value)){
            if(regMat.test(document.getElementById("Matricule").value)){
                if(regProg.test(document.getElementById("Programme").value)){
                    if(regTel.test(document.getElementById("Telephone").value)){
                        if(regMat.test(document.getElementById("Enseignant").value)){
                            document.getElementById("btnAjoutNouveau").disabled=false
                        }
                    }
                }
            }
    }
    }else{document.getElementById("Courriel").style.background = "#FF7575";}
    
}

function changeP(){
    var regMat = new RegExp(/[0-9]{7}$/)
    var regNom = new RegExp(/^[a-zA-Z\s]+$/);
    var regMail = new RegExp(/^\S+@\S+$/);
    var regTel = new RegExp(/[(]{0,1}\d\d\d[)]{0,1}[-]{0,1}[\s]{0,1}\d\d\d[-]{0,1}[\s]{0,1}\d\d\d\d$/);
    var regProg = new RegExp(/(\d\d\d\.\w\w)$/);
    document.getElementById("btnAjoutNouveau").disabled=true
    if(regProg.test(document.getElementById("Programme").value)){
        document.getElementById("Programme").style.background = "#FFFFFF";
        if(regNom.test(document.getElementById("Nom").value)){
            if(regMail.test(document.getElementById("Courriel").value)){
                if(regMat.test(document.getElementById("Matricule").value)){
                    if(regTel.test(document.getElementById("Telephone").value)){
                        if(regMat.test(document.getElementById("Enseignant").value)){
                            document.getElementById("btnAjoutNouveau").disabled=false
                        }
                    }
                }
            }
    }
    }else{document.getElementById("Programme").style.background = "#FF7575";}
    
}

function changeT(){
    var regMat = new RegExp(/[0-9]{7}$/)
    var regNom = new RegExp(/^[a-zA-Z\s]+$/);
    var regMail = new RegExp(/^\S+@\S+$/);
    var regTel = new RegExp(/[(]{0,1}\d\d\d[)]{0,1}[-]{0,1}[\s]{0,1}\d\d\d[-]{0,1}[\s]{0,1}\d\d\d\d$/);
    var regProg = new RegExp(/(\d\d\d\.\w\w)$/);
    document.getElementById("btnAjoutNouveau").disabled=true
    if(regTel.test(document.getElementById("Telephone").value)){ 
        document.getElementById("Telephone").style.background = "#FFFFFF";
        if(regNom.test(document.getElementById("Nom").value)){    
            if(regMail.test(document.getElementById("Courriel").value)){
                if(regProg.test(document.getElementById("Programme").value)){
                    if(regMat.test(document.getElementById("Matricule").value)){
                        if(regMat.test(document.getElementById("Enseignant").value)){
                            document.getElementById("btnAjoutNouveau").disabled=false
                        }
                    }
                }
            }
    }
    }else{document.getElementById("Telephone").style.background = "#FF7575";}
    
}

function changeE(){
    var regMat = new RegExp(/[0-9]{7}$/)
    var regNom = new RegExp(/^[a-zA-Z\s]+$/);
    var regMail = new RegExp(/^\S+@\S+$/);
    var regTel = new RegExp(/[(]{0,1}\d\d\d[)]{0,1}[-]{0,1}[\s]{0,1}\d\d\d[-]{0,1}[\s]{0,1}\d\d\d\d$/);
    var regProg = new RegExp(/(\d\d\d\.\w\w)$/);
    document.getElementById("btnAjoutNouveau").disabled=true
    if(regMat.test(document.getElementById("Enseignant").value)){
        document.getElementById("Enseignant").style.background = "#FFFFFF";
        if(regNom.test(document.getElementById("Nom").value)){
            if(regMail.test(document.getElementById("Courriel").value)){
                if(regProg.test(document.getElementById("Programme").value)){
                    if(regTel.test(document.getElementById("Telephone").value)){
                        if(regMat.test(document.getElementById("Matricule").value)){
                            document.getElementById("btnAjoutNouveau").disabled=false
                        }
                    }
                }
            }
    }
    }else{document.getElementById("Enseignant").style.background = "#FF7575";}
    
}


    </script>
</html>
